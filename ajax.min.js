function Ajax(t){function e(t){if(i!==!1)throw"`has_completed === true`. Already called done or fail";i=!0,a.doneCb&&a.doneCb(t,o)}function s(t){if(i!==!1)throw"`has_completed === true`. Already called done or fail";i=!0,a.failCb&&a.failCb(t,o)}var a=this;if(t=t||{},!t.url)throw"Ajax needs a url to make the request to";if(t.method=t.method||"GET",t.data=t.data||"",t.timeout=t.timeout||5e3,"function"==typeof t.data)throw"Ajax cannot send a function";this.doneCb=void 0,this.failCb=void 0;var o=new XMLHttpRequest,i=!1;return o.onreadystatechange=function(){if(4===this.readyState&&0!==this.status)if(200===this.status||304===this.status){var t=this.response;/application\/json/.test(this.getAllResponseHeaders())&&(t=JSON.parse(this.response)),e(t)}else s({desc:"HTTP status code was neiter a 200 nor 304",status:this.status,res:this.response})},o.ontimeout=function(){s({desc:"Request timed out after: "+o.timeout+" ms",status:this.status})},o.open(t.method,t.url,!0),o.timeout=t.timeout,"object"==typeof t.data&&(t.data=JSON.stringify(t.data)),o.send(t.data),this}Ajax.prototype.done=function(t){return this.doneCb=t,this},Ajax.prototype.fail=function(t){return this.failCb=t,this};